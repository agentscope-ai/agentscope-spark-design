

<DemoTitle title="ChatInput" desc="AI输入框" llmTxtName="Sender"></DemoTitle>



## 示例

```tsx
import React, { useState } from 'react';
import { ChatInput } from '@agentscope-ai/chat';

export default function () {
  const [value, setValue] = useState('Hello, Alibaba Cloud Spark Chat!');
  return <ChatInput placeholder='Please type here...' value={value} onChange={setValue}></ChatInput>
}
```

import { ChatInput } from '@agentscope-ai/chat'


#### 对话输入框示例

以下是此组件的示例和变体



## 生成中暂停

```tsx
import { ChatInput } from '@agentscope-ai/chat';

export default function () {
  return <ChatInput loading placeholder='Please type here...'></ChatInput>
}
```


## 上传图片

```tsx
import React from 'react';
import { Attachments, ChatInput } from '@agentscope-ai/chat';
import { Button, GetProp, Upload } from 'antd';
import { IconButton } from '@agentscope-ai/design';
import { SparkAttachmentLine } from '@agentscope-ai/icons';

export default function () {
  // mock data
  const [attachedFiles, setAttachedFiles] = React.useState<GetProp<typeof Attachments, 'items'>>([
    {
      uid: '-1',
      name: 'image.png',
      status: 'done',
      url: 'https://gw.alicdn.com/imgextra/i4/O1CN01sjZ4Uu1erFDOC6IkA_!!6000000003924-2-tps-396-224.png',
    },
    {
      uid: '-2',
      name: 'image.png',
      status: 'done',
      url: 'https://gw.alicdn.com/imgextra/i4/O1CN01sjZ4Uu1erFDOC6IkA_!!6000000003924-2-tps-396-224.png',
    },
    {
      uid: '-3',
      name: 'image.png',
      status: 'done',
      url: 'https://gw.alicdn.com/imgextra/i4/O1CN01sjZ4Uu1erFDOC6IkA_!!6000000003924-2-tps-396-224.png',
    },
  ]);
  const handleFileChange: GetProp<typeof Attachments, 'onChange'> = async ({ fileList }) => {
    setAttachedFiles(fileList);
  }

  const senderHeader = (
    <ChatInput.Header
      closable={false}
      open={attachedFiles?.length > 0}
    >
      <Attachments
        items={attachedFiles}
        onChange={handleFileChange}
      />
    </ChatInput.Header>
  );
  const attachmentsNode = (
    <Upload onChange={handleFileChange} fileList={attachedFiles} showUploadList={false} key="upload">
      <IconButton icon={<SparkAttachmentLine />} bordered={false} />
    </Upload>
  );

  return <ChatInput placeholder='Please type here...' header={senderHeader}
    prefix={attachmentsNode}></ChatInput>
}
```


## 上传文件

```tsx
import React from 'react';
import { Attachments, ChatInput } from '@agentscope-ai/chat';
import { Button, GetProp, Upload } from 'antd';
import { IconButton } from '@agentscope-ai/design';
import { SparkAttachmentLine } from '@agentscope-ai/icons';

export default function () {
  // mock data
  const [attachedFiles, setAttachedFiles] = React.useState<GetProp<typeof Attachments, 'items'>>([
    {
      uid: '-1',
      name: 'file.pdf',
      status: 'done',
      size: 1000,
    },
    {
      uid: '-2',
      name: 'file.pdf',
      status: 'done',
      size: 2000,

    },
    {
      uid: '-3',
      name: 'file.pdf',
      status: 'done',
      size: 3000,
    },
  ]);

  const handleFileChange: GetProp<typeof Attachments, 'onChange'> = async ({ fileList }) => {
    setAttachedFiles(fileList);
  }

  const senderHeader = (
    <ChatInput.Header
      closable={false}
      open={attachedFiles?.length > 0}
    >
      <Attachments
        items={attachedFiles}
        onChange={handleFileChange}
      />
    </ChatInput.Header>
  );
  const attachmentsNode = (
    <Upload onChange={handleFileChange} fileList={attachedFiles} showUploadList={false} key="upload">
      <IconButton icon={<SparkAttachmentLine />} bordered={false} />
    </Upload>
  );

  return <ChatInput placeholder='Please type here...' header={senderHeader}
    prefix={attachmentsNode}></ChatInput>
}
```


## 自定义模式

```tsx
import React from 'react';
import { ChatInput } from '@agentscope-ai/chat';
import { SparkMagicNoteLine } from '@agentscope-ai/icons';

export default function () {
  const [mode, setMode] = React.useState('');
  return <div style={{ width: '100%' }}>
    <ChatInput.ModeSelect options={[
      {
        icon: <SparkMagicNoteLine style={{ fontSize: 16 }} />,
        label: '文本',
        value: 'text',
        tooltip: '文本 tooltip'
      },
      {
        icon: <SparkMagicNoteLine style={{ fontSize: 16 }} />,
        label: '图片',
        selectedLabel: <div style={{
          overflow: 'hidden',
          textOverflow: 'ellipsis',
          whiteSpace: 'nowrap',
        }}>图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片图片',
        </div>,
        value: 'image',
      },
      {
        icon: <SparkMagicNoteLine style={{ fontSize: 16 }} />,
        label: '文件',
        value: 'file',
      },
    ]}
      value={mode}
      closeTip='close tooltip'
      onChange={setMode}
      desc={<div
        style={{ fontSize: 12 }}
        onClick={() => {
          setMode('')
        }}>
        description of {mode}
      </div>}
    />
    <ChatInput placeholder='Please type here...' ></ChatInput>
  </div>
}
```


## 自定义功能

```tsx
import React from 'react';
import { Attachments, ChatInput } from '@agentscope-ai/chat';
import { GetProp, Upload } from 'antd';
import { IconButton, Button } from '@agentscope-ai/design';
import { SparkAttachmentLine, SparkDeepSearchLine, SparkKeyboardLine } from '@agentscope-ai/icons';

export default function () {
  const [search, setSearch] = React.useState(false);
  const [attachedFiles, setAttachedFiles] = React.useState<GetProp<typeof Attachments, 'items'>>([]);
  const handleFileChange: GetProp<typeof Attachments, 'onChange'> = async ({ fileList }) => {
    setAttachedFiles(fileList);
  }

  const senderHeader = (
    <ChatInput.Header
      closable={false}
      open={attachedFiles?.length > 0}
    >
      <Attachments
        items={attachedFiles}
        onChange={handleFileChange}
      />
    </ChatInput.Header>
  );
  const attachmentsNode = (
    <Upload onChange={handleFileChange} fileList={attachedFiles} showUploadList={false} key="upload">
      <IconButton icon={<SparkAttachmentLine />} bordered={false} />
    </Upload>
  );

  return <ChatInput
    placeholder='Please type here...'
    zoomable
    header={senderHeader}
    prefix={[
      attachmentsNode,
      <Button type="text" color={search ? 'primary' : 'default'} variant={search ? 'filled' : 'text'} icon={<SparkDeepSearchLine />} style={{ padding: '0 6px', gap: 6 }} onClick={() => setSearch(!search)}>联网搜索</Button>,
    ]}>
  </ChatInput>
}

```


## 语音发送

```tsx
import React, { useState } from 'react';
import { ChatInput } from '@agentscope-ai/chat';

export default function () {
  const [value, setValue] = useState('');
  return <ChatInput placeholder='Please type here...' value={value} onChange={setValue} allowSpeech></ChatInput>
}
```


#### API

| 属性名 | 描述 | 类型 | 默认值 | 
|--------|--------|--------|--------|
| defaultValue | 输入框的默认初始值，仅在非受控模式下生效 | string |  | 
| value | 输入框的当前值，用于受控组件模式 | string |  | 
| loading | 是否显示回复中的加载状态，影响按钮和输入框的交互 | boolean |  | 
| readOnly | 是否将输入框设置为只读模式，禁止用户编辑 | boolean |  | 
| submitType | 消息提交的方式，影响发送按钮的行为和快捷键 | SubmitType |  | 
| disabled | 是否禁用整个发送器组件，包括输入框和按钮 | boolean |  | 
| onSubmit | 用户提交消息时的回调函数，接收消息内容作为参数 | (message: string) => void |  | 
| onChange | 输入框值发生变化时的回调函数，用于实时处理用户输入 | (
    value: string,
    event?: React.FormEvent<HTMLTextAreaElement> \| React.ChangeEvent<HTMLTextAreaElement>,
  ) => void |  | 
| onCancel | 用户取消操作时的回调函数，通常用于清空输入或重置状态 | VoidFunction |  | 
| onKeyDown | 键盘事件处理函数，用于自定义键盘快捷键和特殊按键行为 | React.KeyboardEventHandler<any> |  | 
| styles | 语义化样式对象，用于精确控制不同区域的样式 | {
    prefix?: React.CSSProperties;
    input?: React.CSSProperties;
    actions?: React.CSSProperties;
  } |  | 
| rootClassName | 自定义根容器的CSS类名，用于覆盖默认样式 | string |  | 
| classNames | 语义化CSS类名，用于为不同区域添加自定义类名 | {
    prefix?: string;
    input?: string;
    actions?: string;
  } |  | 
| style | 样式 | React.CSSProperties |  | 
| className | 类名 | string |  | 
| prefix | 前缀 UI | React.ReactNode \| React.ReactNode[] |  | 
| header | 头部 UI | React.ReactNode |  | 
| maxLength | 最大文本长度 | number |  | 
| zoomable | 是否可缩放 | boolean |  | 
| initialRows | 初始行数，默认 2，移动端使用建议设置 1 行 | number |  | 
| allowSpeech | 是否支持语音输入 | boolean |  | 
