"use strict";(self.webpackChunk_agentscope_ai_chat=self.webpackChunk_agentscope_ai_chat||[]).push([[8434],{38894:function(_,i,t){t.r(i);var l=t(76311),r=t(93359),p=t(93612),s=t(57415),h=t(63032),n=t(10294),d=t(96057),u=t(76387),o=t(58041),m=t(19482),c=t(36711),x=t(12068),f=t(33456),k=t(50),v=t(58542),g=t(48936),I=t(67294),a=t(73140),e=t(85893);function j(){return(0,e.jsx)(v.dY,{children:(0,e.jsx)(I.Suspense,{fallback:(0,e.jsx)(g.Z,{}),children:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"markdown",children:[(0,e.jsxs)("h1",{id:"usage-with-umi",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#usage-with-umi",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Usage with Umi"]}),(0,e.jsxs)("p",{children:[a.texts[0].value,(0,e.jsx)("a",{href:"https://umijs.org/",target:"_blank",rel:"noopener noreferrer",children:a.texts[1].value}),a.texts[2].value]}),(0,e.jsx)("p",{children:a.texts[3].value}),(0,e.jsxs)("h2",{id:"installation-and-initialization",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#installation-and-initialization",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Installation and Initialization"]}),(0,e.jsx)(n.Z,{lang:"bash",children:a.texts[4].value}),(0,e.jsx)("p",{children:a.texts[5].value}),(0,e.jsx)(n.Z,{lang:"bash",children:a.texts[6].value}),(0,e.jsx)("p",{children:a.texts[7].value}),(0,e.jsx)(n.Z,{lang:"bash",children:a.texts[8].value}),(0,e.jsx)("p",{children:a.texts[9].value}),(0,e.jsx)(n.Z,{lang:"bash",children:a.texts[10].value}),(0,e.jsx)("p",{children:a.texts[11].value}),(0,e.jsx)(n.Z,{lang:"bash",children:a.texts[12].value}),(0,e.jsx)("p",{children:a.texts[13].value}),(0,e.jsx)(n.Z,{lang:"bash",children:a.texts[14].value}),(0,e.jsx)("img",{src:"https://gw.alicdn.com/imgextra/i4/O1CN011GmAwE1q7Eqt9vDUQ_!!6000000005448-2-tps-2452-1654.png",style:{maxWidth:"50%"},alt:"Umi project structure"}),(0,e.jsxs)("h2",{id:"create-chat-route",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#create-chat-route",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Create Chat Route"]}),(0,e.jsx)("p",{children:a.texts[15].value}),(0,e.jsx)(n.Z,{lang:"bash",children:a.texts[16].value}),(0,e.jsxs)("p",{children:[a.texts[17].value,(0,e.jsx)("code",{children:a.texts[18].value}),a.texts[19].value]}),(0,e.jsx)(n.Z,{lang:"diff",children:a.texts[20].value}),(0,e.jsxs)("p",{children:[a.texts[21].value,(0,e.jsx)("a",{href:"https://umijs.org/docs/guides/routes",target:"_blank",children:a.texts[22].value}),a.texts[23].value]}),(0,e.jsxs)("p",{children:[a.texts[24].value,(0,e.jsx)("code",{children:a.texts[25].value}),a.texts[26].value,(0,e.jsx)("code",{children:a.texts[27].value}),a.texts[28].value]}),(0,e.jsx)(n.Z,{lang:"diff",children:a.texts[29].value}),(0,e.jsxs)("h2",{id:"enable-tailwind-css-plugin",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#enable-tailwind-css-plugin",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Enable Tailwind CSS Plugin"]}),(0,e.jsxs)("p",{children:[a.texts[30].value,(0,e.jsx)("a",{href:"https://umijs.org/docs/max/tailwindcss",children:a.texts[31].value})]}),(0,e.jsx)(n.Z,{lang:"bash",children:a.texts[32].value}),(0,e.jsxs)("p",{children:[a.texts[33].value,(0,e.jsx)("code",{children:a.texts[34].value}),a.texts[35].value,(0,e.jsx)("code",{children:a.texts[36].value}),a.texts[37].value]}),(0,e.jsxs)("h2",{id:"complete-chat-page",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#complete-chat-page",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Complete Chat Page"]}),(0,e.jsxs)("p",{children:[a.texts[38].value,(0,e.jsx)("code",{children:a.texts[39].value}),a.texts[40].value]}),(0,e.jsx)(n.Z,{lang:"tsx",children:a.texts[41].value}),(0,e.jsx)("img",{src:"https://gw.alicdn.com/imgextra/i1/O1CN01B9MUtz1ZX1gUhPrfs_!!6000000003203-2-tps-2452-1654.png",style:{maxWidth:"50%"},alt:"Complete chat page"}),(0,e.jsxs)("h2",{id:"build-application",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#build-application",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Build Application"]}),(0,e.jsx)("p",{children:a.texts[42].value}),(0,e.jsx)(n.Z,{lang:"bash",children:a.texts[43].value}),(0,e.jsxs)("p",{children:[a.texts[44].value,(0,e.jsx)("code",{children:a.texts[45].value}),a.texts[46].value]}),(0,e.jsxs)("h2",{id:"next-steps",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#next-steps",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"Next Steps"]}),(0,e.jsx)("p",{children:a.texts[47].value}),(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:a.texts[48].value}),(0,e.jsx)("li",{children:a.texts[49].value}),(0,e.jsx)("li",{children:a.texts[50].value}),(0,e.jsx)("li",{children:a.texts[51].value}),(0,e.jsx)("li",{children:a.texts[52].value})]}),(0,e.jsx)("p",{children:a.texts[53].value}),(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[a.texts[54].value,(0,e.jsx)("a",{href:"https://umijs.org/",children:a.texts[55].value})]}),(0,e.jsxs)("li",{children:[a.texts[56].value,(0,e.jsx)("a",{href:"https://umijs.org/docs/guides/routes",children:a.texts[57].value})]}),(0,e.jsxs)("li",{children:[a.texts[58].value,(0,e.jsx)("a",{href:"https://umijs.org/docs/max/introduce",children:a.texts[59].value}),a.texts[60].value]}),(0,e.jsxs)("li",{children:[a.texts[61].value,(0,e.jsx)("a",{href:"https://pro.ant.design/",children:a.texts[62].value})]}),(0,e.jsxs)("li",{children:[a.texts[63].value,(0,e.jsx)("a",{href:"https://procomponents.ant.design/components/layout",children:a.texts[64].value})]}),(0,e.jsxs)("li",{children:[a.texts[65].value,(0,e.jsx)("a",{href:"https://procomponents.ant.design/components/table",children:a.texts[66].value})]})]}),(0,e.jsxs)("h2",{id:"faq",children:[(0,e.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#faq",children:(0,e.jsx)("span",{className:"icon icon-link"})}),"FAQ"]}),(0,e.jsx)("ul",{children:(0,e.jsxs)("li",{children:[a.texts[67].value,(0,e.jsx)("ul",{children:(0,e.jsxs)("li",{children:[(0,e.jsx)("code",{children:a.texts[68].value}),a.texts[69].value,(0,e.jsx)("code",{children:a.texts[70].value}),a.texts[71].value,(0,e.jsx)("code",{children:a.texts[72].value}),a.texts[73].value]})})]})})]})})})})}i.default=j},50:function(_,i,t){var l=t(58542),r=t(2487),p=t(9053),s=t(85893),h=(0,p.kc)(function(n){var d=n.token;return{list:{display:"flex",gap:d.marginMD},title:{color:d.colorText,transition:"color 0.3s ease","&:hover":{color:d.colorTextSecondary,textDecoration:"underline"}}}});i.Z=function(){var n=(0,l.tx)(),d=h(),u=d.styles;return(0,s.jsx)("div",{className:u.list,children:n.filter(function(o){return o.title}).map(function(o){return(0,s.jsx)(r.Z,{style:{flex:1},header:(0,s.jsx)("h3",{children:o.title}),itemLayout:"horizontal",dataSource:o.children,renderItem:function(c,x){return(0,s.jsx)(r.Z.Item,{children:(0,s.jsx)(l.rU,{to:c.link,style:{display:"block",width:"100%"},children:(0,s.jsx)(r.Z.Item.Meta,{title:(0,s.jsx)("div",{className:u.title,children:c.title}),description:c.frontmatter.description})})},x)}},o.title)})})}},73140:function(_,i,t){t.r(i),t.d(i,{texts:function(){return l}});const l=[{value:"In real-world project development, you may also need build tools, routing solutions, CSS solutions, state management, request libraries and strategies, internationalization, permission management, icon solutions, and more to complete a full-featured project. We recommend using ",paraId:0,tocIndex:0},{value:"Umi",paraId:0,tocIndex:0},{value:", a React-based enterprise-level application framework, to address these needs.",paraId:0,tocIndex:0},{value:"This article will guide you to create a simple application from scratch using Umi and Alibaba Cloud Spark Chat.",paraId:1,tocIndex:0},{value:`$ mkdir spark-chat-demo-umi
$ cd spark-chat-demo-umi
$ npm create umi
`,paraId:2,tocIndex:1},{value:'Choose "Simple App" here because we want to start from scratch.',paraId:3,tocIndex:1},{value:`? Pick Umi App Template \u203A - Use arrow-keys. Return to submit.
\u276F   Simple App
    Ant Design Pro
    Vue Simple App
`,paraId:4,tocIndex:1},{value:'You can choose "npm" to start directly, or select other package management tools.',paraId:5,tocIndex:1},{value:`? Pick Npm Client \u203A - Use arrow-keys. Return to submit.
\u276F   npm
    cnpm
    tnpm
    yarn
    pnpm
`,paraId:6,tocIndex:1},{value:'For users in China, we recommend choosing "taobao", otherwise choose "npm". The taobao registry typically provides faster dependency installation.',paraId:7,tocIndex:1},{value:`? Pick Npm Registry \u203A - Use arrow-keys. Return to submit.
    npm
\u276F   taobao
`,paraId:8,tocIndex:1},{value:"Then the tool will automatically install dependencies and execute Umi's initialization script. Before starting the project, let's install some additional dependencies that will be used in this tutorial.",paraId:9,tocIndex:1},{value:`$ npm install antd @agentscope-ai/design @agentscope-ai/chat --save

`,paraId:10,tocIndex:1},{value:"After completion, execute the following command to start the project. Follow the prompts and click the URL in the command line, which will automatically open the browser. If successful, you will see the following interface.",paraId:11,tocIndex:1},{value:`$ npm run dev
umi dev
info  - Umi v4.4.12
        \u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557
        \u2551 App listening at:                                  \u2551
        \u2551  >   Local: http://localhost:8000                  \u2551
ready - \u2551  > Network: http://*********:8000                  \u2551
        \u2551                                                    \u2551
        \u2551 Now you can open browser with the above addresses\u2191 \u2551
        \u255A\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255D
`,paraId:12,tocIndex:1},{value:"We can create routes using commands.",paraId:13,tocIndex:2},{value:`npx umi g page chat
Write: src/pages/chat.tsx
Write: src/pages/chat.less
`,paraId:14,tocIndex:2},{value:"Then modify the configuration file ",paraId:15,tocIndex:2},{value:".umirc.ts",paraId:15,tocIndex:2},{value:" to add the new route declaration.",paraId:15,tocIndex:2},{value:`import { defineConfig } from 'umi';

export default defineConfig({
  routes: [
    { path: '/', component: 'index' },
    { path: '/docs', component: 'docs' },
+   { path: '/chat', component: 'chat' },
  ],
  npmClient: 'npm',
});
`,paraId:16,tocIndex:2},{value:"Since the scaffold uses configuration-based routing by default, as the name suggests, routes are configured line by line. Although more verbose, it offers higher flexibility. This approach requires adding a routes field in the configuration. For details, see ",paraId:17,tocIndex:2},{value:"Umi Documentation - Routes",paraId:17,tocIndex:2},{value:". Additionally, Umi also supports convention-based routing, where the file system structure defines the routing, so routes take effect without explicit configuration.",paraId:17,tocIndex:2},{value:"Then we edit the ",paraId:18,tocIndex:2},{value:"src/layouts/index.tsx",paraId:18,tocIndex:2},{value:" file and add navigation to the ",paraId:18,tocIndex:2},{value:"/chat",paraId:18,tocIndex:2},{value:" path in the global layout route.",paraId:18,tocIndex:2},{value:`<li>
  <Link to="/docs">Docs</Link>
</li>
+ <li>
+   <Link to="/chat">Chat</Link>
+ </li>
`,paraId:19,tocIndex:2},{value:"To facilitate subsequent project development, we enable the ",paraId:20,tocIndex:3},{value:"Tailwind CSS plugin",paraId:20,tocIndex:3},{value:`$ npx umi g tailwindcss

info  - Update package.json for devDependencies
set config:tailwindcss on /YOUR_PWD/.umirc.ts
info  - Update .umirc.ts
info  - Write tailwind.config.js
info  - Write tailwind.css
`,paraId:21,tocIndex:3},{value:"At this point, you can use Tailwind CSS styles in your project; modify the configuration of ",paraId:22,tocIndex:3},{value:"tailwind.config.js",paraId:22,tocIndex:3},{value:" and ",paraId:22,tocIndex:3},{value:"tailwind.css",paraId:22,tocIndex:3},{value:" in the project root directory as needed.",paraId:22,tocIndex:3},{value:"Modify ",paraId:23,tocIndex:4},{value:"src/pages/chat.tsx",paraId:23,tocIndex:4},{value:" as follows:",paraId:23,tocIndex:4},{value:`import { ConfigProvider, carbonTheme } from '@agentscope-ai/design';
import { Bubble, ChatInput, type TMessage } from '@agentscope-ai/chat';
import { useState } from 'react';

function App() {
  const [messages, setMessages] = useState<TMessage[]>([]);
  const [input, setInput] = useState('');

  const handleSend = (input: string) => {
    setMessages((v) => [
      ...v,
      {
        role: 'user',
        content: input,
        id: Date.now().toString(),
      },
    ]);
    setInput('');

    setTimeout(() => {
      setMessages((v) => [
        ...v,
        {
          role: 'assistant',
          content: \`Echo: \${input}\`,
          id: Date.now().toString(),
        },
      ]);
    }, 1000);
  };

  return (
    <ConfigProvider {...carbonTheme} prefix="spark-chat" prefixCls="spark-chat">
      <div className="h-[80vh] m-[20px] flex flex-col">
        <Bubble.List
          items={messages}
          classNames={{
            wrapper: 'flex-1 h-[0]',
          }}
        />
        <ChatInput value={input} onChange={setInput} onSubmit={handleSend} />
      </div>
    </ConfigProvider>
  );
}

export default App;
`,paraId:24,tocIndex:4},{value:"After completing development and verifying in the development environment, you need to deploy to your users. Execute the following command.",paraId:25,tocIndex:5},{value:`$ npm run build
info  - Umi v4.4.12
\u2714 Webpack
  Compiled successfully in 1.36s
info  - File sizes after gzip:
  123.4 kB  dist/umi.js
  1.37 kB   dist/umi.css
  660 B     dist/layouts__index.async.js
  656 B     dist/p__index.async.js
  567 B     dist/p__chat.async.js
  531 B     dist/p__docs.async.js
  100 B     dist/layouts__index.chunk.css
  55 B      dist/p__chat.chunk.css
event - Build index.html
`,paraId:26,tocIndex:5},{value:"The build will package all resources, including JavaScript, CSS, Web Fonts, images, HTML, etc. You can find these files in the ",paraId:27,tocIndex:5},{value:"dist/",paraId:27,tocIndex:5},{value:" directory.",paraId:27,tocIndex:5},{value:"We have completed a simple application, but you may still have many questions, such as:",paraId:28,tocIndex:6},{value:"How to handle errors uniformly?",paraId:29,tocIndex:6},{value:"How to handle more routes, such as dynamic routes, nested routes, permission routes, etc.?",paraId:29,tocIndex:6},{value:"How to use data flow solutions?",paraId:29,tocIndex:6},{value:"How to modify webpack configuration or switch to vite build mode?",paraId:29,tocIndex:6},{value:"And more",paraId:29,tocIndex:6},{value:"You can:",paraId:30,tocIndex:6},{value:"Visit the ",paraId:31,tocIndex:6},{value:"Umi Official Website",paraId:31,tocIndex:6},{value:"Learn about ",paraId:31,tocIndex:6},{value:"Umi Routes",paraId:31,tocIndex:6},{value:"Learn about ",paraId:31,tocIndex:6},{value:"Umi Max",paraId:31,tocIndex:6},{value:" with higher integration than Umi",paraId:31,tocIndex:6},{value:"Learn about the out-of-the-box admin scaffold ",paraId:31,tocIndex:6},{value:"Ant Design Pro",paraId:31,tocIndex:6},{value:"Learn about advanced layout ",paraId:31,tocIndex:6},{value:"ProLayout",paraId:31,tocIndex:6},{value:"Learn about advanced table ",paraId:31,tocIndex:6},{value:"ProTable",paraId:31,tocIndex:6},{value:`Why can't I see the chat list rendering?
`,paraId:32,tocIndex:7},{value:"Bubble.List",paraId:33,tocIndex:7},{value:" and ",paraId:33,tocIndex:7},{value:"ChatInput",paraId:33,tocIndex:7},{value:" require their parent element to have a specified height and ",paraId:33,tocIndex:7},{value:"flex-direction: column",paraId:33,tocIndex:7},{value:".",paraId:33,tocIndex:7}]}}]);
